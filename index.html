<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ten Rise: Official Music Showcase</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- YouTube IFrame API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            background-image: 
                linear-gradient(rgba(17, 24, 39, 0.5), rgba(17, 24, 39, 0.5)),
                url('https://i.imgur.com/3RD3PbO.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        #detail-panel {
            background-image: 
                linear-gradient(rgba(17, 24, 39, 0.95), rgba(17, 24, 39, 0.95)),
                url('https://i.imgur.com/3RD3PbO.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .modal-content-translucent {
            background-image: 
                linear-gradient(rgba(17, 24, 39, 0.90), rgba(17, 24, 39, 0.90)),
                url('https://i.imgur.com/3RD3PbO.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .modal-sticky-header { backdrop-filter: blur(4px); }

        .album-cover {
            transition: all 0.2s ease-in-out;
            border: 4px solid transparent;
            aspect-ratio: 1;
            width: 100%;
        }
        .album-cover:hover { transform: scale(1.03); }
        .album-cover.selected {
            border-color: #06b6d4;
            transform: scale(1.05);
            box-shadow: 
                0 0 8px 2px rgba(6, 182, 212, 1),
                0 0 20px 5px rgba(6, 182, 212, 0.6);
        }
        
        #modal-search-input:focus {
            outline: none;
            border-color: #06b6d4;
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.5);
        }
        
        .modal-scrollable::-webkit-scrollbar { width: 8px; }
        .modal-scrollable::-webkit-scrollbar-thumb { 
            background-color: #06b6d4;
            border-radius: 4px;
        }
        .modal-scrollable::-webkit-scrollbar-track { 
            background-color: #374151;
        }
        
        .page {
            position: absolute; 
            top: 0;
            left: 0;
            width: 100%;
            min-height: 100vh;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0.5s;
            display: flex;
        }
        .page.active {
            opacity: 1;
            visibility: visible;
        }

        /* Navigation Panel with same style as "Available Releases" section */
        .nav-panel {
            background: rgba(17, 24, 39, 0.5);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(6, 182, 212, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .nav-icon {
            transition: all 0.3s ease;
            color: #06b6d4;
        }

        .nav-button {
            transition: all 0.3s ease;
            background: transparent;
            border: 1px solid transparent;
        }
        .nav-button:hover {
            transform: translateY(-2px);
            background: rgba(6, 182, 212, 0.15);
            border-color: rgba(6, 182, 212, 0.4);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
        }
        .nav-button:hover .nav-icon {
            filter: drop-shadow(0 0 8px rgba(6, 182, 212, 0.8));
        }

        /* Media Player Styles - EXACTLY like selected album covers */
        .media-player {
            background: rgba(31, 41, 55, 0.7);
            border: 4px solid #06b6d4;
            border-radius: 12px;
            padding: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
            transform: scale(1.05);
            box-shadow: 
                0 0 8px 2px rgba(6, 182, 212, 1),
                0 0 20px 5px rgba(6, 182, 212, 0.6);
        }

        .media-player:focus-within {
            border-color: #06b6d4;
            box-shadow: 
                0 0 12px 3px rgba(6, 182, 212, 1),
                0 0 25px 8px rgba(6, 182, 212, 0.8);
        }

        .play-button {
            background: #06b6d4;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: pointer.
        }

        .play-button:hover {
            background: #0891b2;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.5);
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            height: 6px;
            overflow: hidden;
            cursor: pointer;
        }

        .progress {
            background: #06b6d4;
            height: 100%;
            width: 0%;
            transition: width 0.1s ease;
        }

        .volume-slider {
            -webkit-appearance: none;
            width: 100px;
            height: 4px;
            border-radius: 2px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #06b6d4;
            cursor: pointer;
        }

        .time-display {
            font-size: 0.8rem;
            color: #9ca3af;
        }

        .loading-spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f4f6;
            border-top: 2px solid #06b6d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Hidden YouTube player */
        #youtube-player {
            position: absolute;
            top: -1000px;
            left: -1000px;
            width: 1px;
            height: 1px;
        }

        /* Visualizer Styles - FIXED to fill full width */
        .visualizer-container {
            position: relative;
            margin-top: 16px;
            height: 60px;
            display: flex;
            align-items: end;
            justify-content: space-between;
            gap: 1px;
            padding: 8px;
            border-radius: 8px;
            background: rgba(17, 24, 39, 0.3);
            border: 1px solid rgba(6, 182, 212, 0.3);
            overflow: hidden;
            width: 100%;
        }

        .visualizer-bar {
            flex: 1;
            min-width: 3px;
            background: linear-gradient(to top, #06b6d4, #0891b2, #0e7490);
            border-radius: 2px 2px 0 0;
            transition: height 0.1s ease;
            min-height: 2px;
            max-height: 50px;
        }

        .visualizer-bar.active {
            box-shadow: 0 0 6px rgba(6, 182, 212, 0.7);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-accent': '#06b6d4',
                        'dark-bg': '#1f2937',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>
<body class="text-white">

    <!-- Navigation Panel with Redesigned Clear Icons -->
    <div class="fixed top-4 left-4 z-40">
        <div class="nav-panel rounded-xl p-1 flex items-center justify-between space-x-1 min-h-[40px]">
            <!-- Home - Modern House Design -->
            <button onclick="showPage('home')" title="Home" class="nav-button p-1 rounded-lg group">
                <svg width="20" height="20" viewBox="0 0 24 24" class="nav-icon" fill="currentColor">
                    <path d="M12 2L2 7L4 9V21H20V9L22 7L12 2Z" stroke="currentColor" stroke-width="1" fill="none"/>
                    <rect x="9" y="13" width="6" height="8" fill="currentColor" opacity="0.7"/>
                    <path d="M12 2V7" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            </button>

            <!-- Music - Clear Sound Waves -->
            <button onclick="showPage('showcase')" title="Music Showcase" class="nav-button p-1 rounded-lg group">
                <svg width="20" height="20" viewBox="0 0 24 24" class="nav-icon" fill="currentColor">
                    <path d="M6 17V9M10 17V5M14 17V9M18 17V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
                    <circle cx="6" cy="17" r="2" fill="currentColor"/>
                    <circle cx="10" cy="17" r="2" fill="currentColor"/>
                    <circle cx="14" cy="17" r="2" fill="currentColor"/>
                    <circle cx="18" cy="17" r="2" fill="currentColor"/>
                </svg>
            </button>

            <!-- Contact - Modern Envelope -->
            <button onclick="showPage('contact')" title="Contact Us" class="nav-button p-1 rounded-lg group">
                <svg width="20" height="20" viewBox="0 0 24 24" class="nav-icon" fill="currentColor">
                    <rect x="2" y="4" width="20" height="16" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    <path d="M2 8L12 13L22 8" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    <circle cx="7" cy="11" r="0.5" fill="currentColor"/>
                    <circle cx="10" cy="11" r="0.5" fill="currentColor"/>
                    <circle cx="13" cy="11" r="0.5" fill="currentColor"/>
                </svg>
            </button>

            <!-- Donation - Heart (unchanged) -->
            <button onclick="showPage('donation')" title="Support Us" class="nav-button p-1 rounded-lg group">
                <svg width="20" height="20" viewBox="0 0 24 24" class="nav-icon" fill="currentColor">
                    <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" fill="currentColor"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Hidden YouTube Player -->
    <div id="youtube-player"></div>

    <!-- Pages remain exactly the same -->
    <div id="page-home" class="page active min-h-screen flex flex-col justify-center items-center p-4 sm:p-8">
        <button onclick="showPage('showcase')" title="Go to Music Showcase" class="bg-transparent border-none transition-transform duration-300 hover:scale-[1.02] focus:outline-none focus:ring-4 focus:ring-primary-accent focus:ring-opacity-50 rounded-lg p-0 cursor-pointer">
            <img src="https://i.imgur.com/80HMrPY.png" alt="Ten Rise Official Logo" class="w-full max-w-2xl h-auto mb-12 animate-pulse" onerror="this.src='https://placehold.co/600x150/111827/ffffff?text=TEN+RISE'">
        </button>
    </div>

    <div id="page-showcase" class="page min-h-screen flex flex-col p-4 sm:p-8">
        <header class="mb-4 flex flex-col items-center relative">
            <div class="absolute top-0 right-0 flex space-x-2">
                <button id="lang-en" class="text-sm font-semibold p-1 rounded-md transition-colors duration-200 text-primary-accent" onclick="setLanguage('en')">EN</button>
                <button id="lang-jp" class="text-sm font-semibold p-1 rounded-md transition-colors duration-200 text-gray-400" onclick="setLanguage('jp')">JP</button>
            </div>
            <img src="https://i.imgur.com/80HMrPY.png" alt="Ten Rise Logo" class="w-full max-w-xl h-auto" onerror="this.src='https://placehold.co/600x150/111827/ffffff?text=TEN+RISE'">
        </header>

        <div id="social-links-bar" class="flex justify-center items-center mb-8"></div>

        <!-- Available Releases Section -->
        <div class="mb-10 bg-gray-900/50 backdrop-blur-sm rounded-xl p-4 shadow-xl">
            <div id="current-selection-summary" class="w-full mb-4 flex items-center justify-between space-x-4 min-h-[64px]"></div>
            <button id="gallery-toggle" class="w-full flex justify-between items-center text-left group focus:outline-none bg-primary-accent/10 hover:bg-primary-accent/20 p-3 rounded-lg transition-colors duration-200" onclick="openModal()">
                <h2 id="gallery-title" class="text-xl font-bold text-gray-100 group-hover:text-primary-accent transition-colors duration-200">View All Releases</h2>
                <svg class="w-6 h-6 text-gray-400 group-hover:text-primary-accent transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>
        </div>

        <main id="detail-panel" class="flex-grow bg-gray-900/90 rounded-xl shadow-2xl p-6 md:p-10 text-white flex flex-col lg:flex-row gap-8">
            <div id="detail-content" class="w-full flex justify-center items-center h-full min-h-[300px]">
                <p id="initial-prompt" class="text-gray-400 text-xl animate-pulse">Select a release to view the full details.</p>
            </div>
        </main>
        
        <div id="message-box" class="fixed bottom-4 right-4 p-4 bg-yellow-900 border border-yellow-700 text-yellow-300 rounded-lg text-sm transition-all duration-300 shadow-lg z-50 hidden"></div>
    </div>

    <div id="page-contact" class="page min-h-screen flex flex-col p-4 sm:p-8">
        <header class="mb-4 flex flex-col items-center relative">
            <div class="absolute top-0 right-0 flex space-x-2">
                <button id="lang-en-contact" class="text-sm font-semibold p-1 rounded-md transition-colors duration-200 text-primary-accent" onclick="setLanguage('en')">EN</button>
                <button id="lang-jp-contact" class="text-sm font-semibold p-1 rounded-md transition-colors duration-200 text-gray-400" onclick="setLanguage('jp')">JP</button>
            </div>
            <img src="https://i.imgur.com/80HMrPY.png" alt="Ten Rise Logo" class="w-full max-w-xl h-auto" onerror="this.src='https://placehold.co/600x150/111827/ffffff?text=TEN+RISE'">
        </header>

        <div class="flex-grow flex items-center justify-center">
            <div class="bg-gray-900/90 rounded-xl shadow-2xl p-8 w-full max-w-2xl">
                <h2 class="text-3xl font-bold text-primary-accent mb-6 text-center">Contact Us</h2>
                <p class="text-gray-300 mb-8 text-center">We'd love to hear from you! Send us a message and we'll respond as soon as possible.</p>
                <form id="contact-form" class="space-y-6">
                    <input type="text" id="name" name="name" required placeholder="Your Name" class="w-full px-4 py-3 rounded-lg bg-gray-800/70 text-gray-200 placeholder-gray-400 border border-gray-600 focus:border-primary-accent focus:outline-none transition-all duration-300">
                    <input type="email" id="email" name="email" required placeholder="Your Email" class="w-full px-4 py-3 rounded-lg bg-gray-800/70 text-gray-200 placeholder-gray-400 border border-gray-600 focus:border-primary-accent focus:outline-none transition-all duration-300">
                    <input type="text" id="subject" name="subject" required placeholder="Subject" class="w-full px-4 py-3 rounded-lg bg-gray-800/70 text-gray-200 placeholder-gray-400 border border-gray-600 focus:border-primary-accent focus:outline-none transition-all duration-300">
                    <textarea id="message" name="message" rows="6" required placeholder="Your Message" class="w-full px-4 py-3 rounded-lg bg-gray-800/70 text-gray-200 placeholder-gray-400 border border-gray-600 focus:border-primary-accent focus:outline-none transition-all duration-300 resize-none"></textarea>
                    <button type="submit" class="w-full bg-primary-accent hover:bg-cyan-500 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-primary-accent focus:ring-opacity-50">Send Message</button>
                </form>
            </div>
        </div>
    </div>

    <div id="page-donation" class="page min-h-screen flex flex-col p-4 sm:p-8">
        <header class="mb-4 flex flex-col items-center relative">
            <div class="absolute top-0 right-0 flex space-x-2">
                <button id="lang-en-donation" class="text-sm font-semibold p-1 rounded-md transition-colors duration-200 text-primary-accent" onclick="setLanguage('en')">EN</button>
                <button id="lang-jp-donation" class="text-sm font-semibold p-1 rounded-md transition-colors duration-200 text-gray-400" onclick="setLanguage('jp')">JP</button>
            </div>
            <img src="https://i.imgur.com/80HMrPY.png" alt="Ten Rise Logo" class="w-full max-w-xl h-auto" onerror="this.src='https://placehold.co/600x150/111827/ffffff?text=TEN+RISE'">
        </header>

        <div class="flex-grow flex items-center justify-center">
            <div class="bg-gray-900/90 rounded-xl shadow-2xl p-8 w-full max-w-2xl">
                <h2 class="text-3xl font-bold text-primary-accent mb-6 text-center">Support Ten Rise</h2>
                <div class="text-gray-300 space-y-4 text-center">
                    <p class="text-lg">We're working hard to create amazing music and share it with the world.</p>
                    <p>Your support helps us continue our musical journey and create more content for our fans.</p>
                    <p class="text-primary-accent font-semibold">Coming Soon: Donation Options</p>
                    <p class="text-sm text-gray-400">We're setting up secure donation methods. Check back soon!</p>
                </div>
                <div class="mt-8 p-6 bg-gray-800/50 rounded-lg border border-gray-700 text-center">
                    <p class="text-gray-400 mb-4">Donation options will appear here soon</p>
                    <div class="flex justify-center space-x-4 opacity-50">
                        <div class="w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center"><span class="text-gray-500 text-xs">PayPal</span></div>
                        <div class="w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center"><span class="text-gray-500 text-xs">Stripe</span></div>
                        <div class="w-12 h-12 bg-gray-700 rounded-lg flex items-center justify-center"><span class="text-gray-500 text-xs">Bank</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal -->
    <div id="selection-modal" class="fixed inset-0 z-50 bg-black bg-opacity-80 backdrop-blur-sm hidden transition-opacity duration-300 ease-out" aria-modal="true" role="dialog">
        <div class="flex items-center justify-center min-h-screen p-4 sm:p-6">
            <div id="modalContent" class="modal-content-translucent p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden transform scale-95 opacity-0 transition-all duration-300 ease-out">
                <div class="modal-sticky-header sticky top-0 z-20 -mx-6 -mt-6 px-6 pt-6 pb-4">
                    <div class="flex justify-between items-center pb-4 mb-4 border-b border-gray-700">
                        <h2 class="text-3xl font-bold text-primary-accent text-gray-100">Select a Release</h2>
                        <button id="closeModalButton" onclick="closeModal()" class="text-primary-accent hover:text-cyan-300 transition-colors p-2 rounded-full hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-accent" aria-label="Close modal">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                        </button>
                    </div>
                    <input type="text" id="modal-search-input" oninput="filterReleases()" placeholder="Search by Title, Style, or Instrument..." class="w-full md:max-w-xl py-1 px-3 rounded-lg bg-gray-800/70 text-sm text-gray-200 placeholder-gray-400 border border-gray-600 focus:border-primary-accent transition-all duration-300">
                </div>
                <div class="modal-scrollable overflow-y-auto max-h-[60vh] pb-4 py-6 px-6 sm:py-8 sm:px-10">
                    <div id="modal-release-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- OPTIMIZED JavaScript - Only safe optimizations -->
    <script>
        // Constants and Configuration - Grouped for better organization
        const CONFIG = {
            currentLanguage: 'en',
            selectedReleaseIndex: null,
            youtubePlayer: null,
            isPlaying: false,
            currentTrackId: null,
            progressInterval: null,
            visualizerInterval: null,
            visualizerBars: []
        };

        const TRANSLATIONS = {
            'en': {
                'gallery-title': 'View All Releases', 'current-selection': 'Current Selection:', 'initial-prompt': 'Select a release to view the full details.',
                'details-heading': 'Single Details', 'listen-prompt': 'Click an icon to listen:', 'artist': 'Artist', 'duration': 'Duration', 'label': 'Label',
                'style': 'Style', 'release_date': 'Release Date', 'desc_heading': 'Track Description:', 'available-releases': 'Available Releases',
                'click-to-view': 'Click "View All Releases" below to select a track', 'contact-title': 'Contact Us', 'donation-title': 'Support Ten Rise',
                'track-journey-desc': "A gentle, cinematic piece built around themes of hope and aspiration. Featuring serene female vocals, intricate piano melodies, and lush synthesizer arrangements, the track culminates with the ethereal quality of a children's choir, suggesting a bright, illuminated future. The style aligns with uplifting Anisong and anime soundtracks, providing calm, hopeful music.",
                'track-stars-desc': "An energetic and highly rhythmic anthem designed to inspire determination. This track features a powerful lead female vocal backed by a dynamic children's choir, set against a driving blend of synthesizer leads and prominent piano rhythms. Its powerful, uplifting style is characteristic of modern Anisong and anime themes, delivering rhymed, energetic music."
            },
            'jp': {
                'gallery-title': '全リリースを見る', 'current-selection': '現在の選択:', 'initial-prompt': 'リリースを選択して詳細をご覧ください。',
                'details-heading': 'シングル詳細', 'listen-prompt': 'アイコンをクリックして聴く:', 'artist': 'アーティスト', 'duration': '演奏時間', 'label': 'レーベル',
                'style': 'スタイル', 'release_date': 'リリース日', 'desc_heading': '楽曲の説明:', 'available-releases': '利用可能なリリース',
                'click-to-view': '下の「全リリースを見る」をクリックして曲を選択してください', 'contact-title': 'お問い合わせ', 'donation-title': 'Ten Riseをサポート',
                'track-journey-desc': "希望と憧れをテーマにした、優しくシネマティックな楽曲。穏やかな女性ボーカル、繊細なピアノメロディ、豊かなシンセサイザーアレンジメントを特徴とし、子供たちのコーラスが明るく照らされた未来を暗示します。アップリフティングなアニソン、アニメのサウンドトラックに適合する、穏やかで希望に満ちた音楽です。",
                'track-stars-desc': "決意を鼓舞するためにデザインされた、エネルギッシュでリズミカルなアンセム。力強いリード女性ボーカルとダイナミックな子供たちのコーラスが特徴で、ドライヴ感のあるシンセサイザーと際立ったピアノのリズムが融合しています。力強く、高揚感のあるスタイルは、現代のアニソンやアニメのテーマ曲を彷彿とさせ、リズミカルでエネルギッシュな楽曲をお届けします。"
            }
        };

        const SOCIAL_LINKS = [
            { name: "Instagram", url: "https://www.instagram.com/tr_tenrise/", iconUrl: "https://i.imgur.com/RHS4HTR.png" },
            { name: "TikTok", url: "https://www.tiktok.com/@tr_tenrise", iconUrl: "https://i.imgur.com/kOu4UG7.png" },
            { name: "X (Twitter)", url: "https://x.com/TR_TenRise", iconUrl: "https://i.imgur.com/Yd5oBVX.png" }
        ];

        const RELEASES_DATA = [
            {
                id: 'track-journey', title: "光の旅路 Journey of Light", artist: "Ten Rise", label: "Ten Rise Records",
                image: "https://i.imgur.com/dFLGglK.jpeg", duration: "5:07", descriptionKey: 'track-journey-desc',
                genres: ["J-Pop", "Anisong", "Anime OST", "Female Vocal", "Cinematic Uplifting Trance (Ballad)", "Piano"],
                releaseDate: "September 25, 2025",
                youtubeId: "ww_blgytmmA",
                streamingLinks: [
                    { name: "Spotify", url: "https://open.spotify.com/album/4T2dI4Gtwv62TbtWwNUzcR", iconUrl: "https://i.imgur.com/C1Sa9gR.png"},
                    { name: "Apple Music", url: "https://music.apple.com/jp/album/journey-of-light-single/1840632415?at=10l7qr", iconUrl: "https://i.imgur.com/VEq0YKj.png"},
                    { name: "YouTube Music", url: "https://music.youtube.com/watch?v=ww_blgytmmA", iconUrl: "https://i.imgur.com/IKzOJac.png"},
                    { name: "Amazon Music", url: "https://www.amazon.co.jp/music/player/albums/B0FRN5KY59?&_encoding=UTF8&tag=tcjaz-22&linkCode=ur2&camp=247&creative=1211", iconUrl: "https://i.imgur.com/x8Fu3Ot.png"},
                    { name: "Line Music", url: "https://music.line.me/webapp/album/mb0000000004af7632", iconUrl: "https://i.imgur.com/b90tXvr.png"},
                    { name: "Awa", url: "https://s.awa.fm/track/b6db9113a176c8171e70", iconUrl: "https://i.imgur.com/Lfo1UZ4.png"},
                    { name: "Dhit Docomo", url: "https://dhits.docomo.ne.jp/search/freeword/musics?k_q=Ten%20Rise%20%E5%85%89%E3%81%AE%E6%97%85%E8%B7%AF", iconUrl: "https://i.imgur.com/nheUqcV.png" },
                    { name: "KKBOX", url: "https://www.kkbox.com/jp/ja/album/_albYKvuDpNo6CCsFq", iconUrl: "https://i.imgur.com/noe1VXg.png"},
                    { name: "Mora", url: "https://mora.jp/package/43000074/TCJPR0001494929/", iconUrl: "https://i.imgur.com/sPIBy5J.png"},
                    { name: "Music.jp", url: "https://music-book.jp/Search?Keyword=Ten%20Rise%20%E5%85%89%E3%81%AE%E6%97%85%E8%B7%AF", iconUrl: "https://i.imgur.com/sPIBy5J.png"},
                    { name: "Rakuten Music", url: "https://music.rakuten.co.jp/link/search?q=%20%E5%85%89%E3%81%AE%E6%97%85%E8%B7%AF", iconUrl: "https://i.imgur.com/AhUEhy2.png"},
                    { name: "Recochoku", url: "https://recochoku.jp/album/A2005723996", iconUrl: "https://i.imgur.com/tjVsvF2.png"}
                ]
            },
            {
                id: 'track-stars', title: "星の彼方へ Beyond the Stars", artist: "Ten Rise", label: "Ten Rise Records",
                image: "https://i.imgur.com/mcMAj8X.jpeg", duration: "6:33", descriptionKey: 'track-stars-desc',
                genres: ["J-Pop", "Anisong", "Anime OST", "Female Vocal", "Cinematic Uplifting Trance (Ballad)", "Piano"],
                releaseDate: "October 2, 2025",
                youtubeId: "TyZnEaDB4KM",
                streamingLinks: [
                    { name: "Apple Music", url: "https://music.apple.com/jp/album/beyond-the-stars-single/1843268720", iconUrl: "https://i.imgur.com/VEq0YKj.png"},
                    { name: "Spotify", url: "https://open.spotify.com/album/6UztNcNTQuTbKeQmO5v64I", iconUrl: "https://i.imgur.com/C1Sa9gR.png"},
                    { name: "YouTube Music", url: "https://music.youtube.com/watch?v=TyZnEaDB4KM", iconUrl: "https://i.imgur.com/IKzOJac.png"},
                    { name: "Line Music", url: "https://music.line.me/webapp/album/mb0000000004b6cfeb", iconUrl: "https://i.imgur.com/b90tXvr.png"},
                    { name: "Amazon Music", url: "https://www.amazon.co.jp/music/player/albums/B0FTF5CQ5W?&_encoding=UTF8&tag=tcjaz-22&linkCode=ur2&camp=247&creative=1211", iconUrl: "https://i.imgur.com/x8Fu3Ot.png"},
                    { name: "Awa", url: "https://s.awa.fm/track/bf13967a12f74c4ce886", iconUrl: "https://i.imgur.com/Lfo1UZ4.png"},
                    { name: "Recochoku", url: "https://recochoku.jp/album/A2005763230", iconUrl: "https://i.imgur.com/tjVsvF2.png"},
                    { name: "Mora", url: "https://mora.jp/package/43000074/TCJPR0001494928/", iconUrl: "https://i.imgur.com/sPIBy5J.png"},
                    { name: "KKBOX", url: "https://www.kkbox.com/jp/ja/album/-rlURCfJ1XBjKrt77US", iconUrl: "https://i.imgur.com/noe1VXg.png"},
                    { name: "Dhit Docomo", url: "https://dhits.docomo.ne.jp/search/freeword/musics?k_q=Ten%20Rise%20%E6%98%9F%E3%81%AE%E5%BD%BC%E6%96%B9%E3%81%B8", iconUrl: "https://i.imgur.com/nheUqcV.png" },
                    { name: "Music.jp", url: "https://music-book.jp/Search?Keyword=Ten%20Rise%20%E6%98%9F%E3%81%AE%E5%BD%BC%E6%96%B9%E6%96%B9%E3%81%B8", iconUrl: "https://i.imgur.com/sPIBy5J.png"},
                    { name: "Rakuten Music", url: "https://music.rakuten.co.jp/link/search?q=%20%E6%98%9F%E3%81%AE%E5%BD%BC%E6%96%B9%E3%81%B8", iconUrl: "https://i.imgur.com/AhUEhy2.png"}
                ]
            }
        ];

        // Simulated Visualizer Functions
        function createVisualizer() {
            const container = document.getElementById('visualizer-container');
            if (!container) return;
            
            container.innerHTML = '';
            CONFIG.visualizerBars = [];
            
            const barCount = 28;
            for (let i = 0; i < barCount; i++) {
                const bar = document.createElement('div');
                bar.className = 'visualizer-bar';
                bar.style.height = '2px';
                container.appendChild(bar);
                CONFIG.visualizerBars.push(bar);
            }
            
            startVisualizerAnimation();
        }

        function startVisualizerAnimation() {
            if (CONFIG.visualizerInterval) clearInterval(CONFIG.visualizerInterval);
            
            CONFIG.visualizerInterval = setInterval(() => {
                if (!CONFIG.isPlaying) return;
                
                CONFIG.visualizerBars.forEach((bar, index) => {
                    const time = Date.now() * 0.002;
                    const wave = Math.sin(time + index * 0.3) * 0.5 + 0.5;
                    const random = Math.random() * 0.3;
                    const height = 2 + (wave + random) * 45;
                    
                    bar.style.height = `${height}px`;
                    bar.classList.toggle('active', height > 25);
                });
            }, 100);
        }

        function stopVisualizer() {
            if (CONFIG.visualizerInterval) {
                clearInterval(CONFIG.visualizerInterval);
                CONFIG.visualizerInterval = null;
            }
            
            CONFIG.visualizerBars.forEach(bar => {
                bar.style.height = '2px';
                bar.classList.remove('active');
            });
        }

        // Progress update functions
        function startProgressUpdates() {
            stopProgressUpdates();
            CONFIG.progressInterval = setInterval(updateProgressBar, 100);
        }

        function stopProgressUpdates() {
            if (CONFIG.progressInterval) {
                clearInterval(CONFIG.progressInterval);
                CONFIG.progressInterval = null;
            }
        }

        // YouTube Player API
        function onYouTubeIframeAPIReady() {
            CONFIG.youtubePlayer = new YT.Player('youtube-player', {
                height: '1',
                width: '1',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            console.log('YouTube player ready');
        }

        function onPlayerStateChange(event) {
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const loadingSpinner = document.getElementById('loading-spinner');
            
            switch(event.data) {
                case YT.PlayerState.PLAYING:
                    CONFIG.isPlaying = true;
                    loadingSpinner.style.display = 'none';
                    pauseIcon.style.display = 'block';
                    playIcon.style.display = 'none';
                    
                    createVisualizer();
                    startProgressUpdates();
                    break;
                    
                case YT.PlayerState.PAUSED:
                    CONFIG.isPlaying = false;
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    loadingSpinner.style.display = 'none';
                    stopVisualizer();
                    stopProgressUpdates();
                    break;
                    
                case YT.PlayerState.ENDED:
                    CONFIG.isPlaying = false;
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    loadingSpinner.style.display = 'none';
                    document.getElementById('progress').style.width = '0%';
                    stopVisualizer();
                    stopProgressUpdates();
                    break;
                    
                case YT.PlayerState.BUFFERING:
                    loadingSpinner.style.display = 'block';
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'none';
                    break;
            }
            updateProgressBar();
        }

        // Media Player Functions
        function togglePlayPause() {
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const loadingSpinner = document.getElementById('loading-spinner');
            
            if (!CONFIG.youtubePlayer || !CONFIG.currentTrackId) {
                showMessage('Please select a track first.', 'error');
                return;
            }
            
            if (CONFIG.isPlaying) {
                CONFIG.youtubePlayer.pauseVideo();
                stopVisualizer();
                stopProgressUpdates();
            } else {
                loadingSpinner.style.display = 'block';
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'none';
                
                if (CONFIG.youtubePlayer.getVideoData().video_id !== CONFIG.currentTrackId) {
                    CONFIG.youtubePlayer.loadVideoById(CONFIG.currentTrackId);
                } else {
                    CONFIG.youtubePlayer.playVideo();
                }
            }
        }

        function updateProgressBar() {
            if (!CONFIG.youtubePlayer || !CONFIG.isPlaying) return;
            
            const progress = document.getElementById('progress');
            const currentTime = document.getElementById('current-time');
            const duration = document.getElementById('duration');
            
            const current = CONFIG.youtubePlayer.getCurrentTime();
            const total = CONFIG.youtubePlayer.getDuration();
            
            if (total > 0) {
                const percent = (current / total) * 100;
                progress.style.width = percent + '%';
                
                currentTime.textContent = formatTime(current);
                duration.textContent = formatTime(total);
            }
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function seekAudio(event) {
            if (!CONFIG.youtubePlayer) return;
            
            const progressBar = document.getElementById('progress-bar');
            const rect = progressBar.getBoundingClientRect();
            const percent = (event.clientX - rect.left) / rect.width;
            const newTime = percent * CONFIG.youtubePlayer.getDuration();
            
            CONFIG.youtubePlayer.seekTo(newTime, true);
        }

        function setVolume(event) {
            if (!CONFIG.youtubePlayer) return;
            CONFIG.youtubePlayer.setVolume(event.target.value);
        }

        function loadTrack(youtubeId) {
            if (CONFIG.youtubePlayer && CONFIG.isPlaying) {
                CONFIG.youtubePlayer.stopVideo();
                CONFIG.isPlaying = false;
                stopVisualizer();
                stopProgressUpdates();
            }
            
            CONFIG.currentTrackId = youtubeId;
            
            const playIcon = document.getElementById('play-icon');
            const pauseIcon = document.getElementById('pause-icon');
            const loadingSpinner = document.getElementById('loading-spinner');
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
            loadingSpinner.style.display = 'none';
            document.getElementById('progress').style.width = '0%';
            document.getElementById('current-time').textContent = '0:00';
            document.getElementById('duration').textContent = RELEASES_DATA.find(release => release.youtubeId === youtubeId)?.duration || '0:00';
        }

        // UI Functions
        function showMessage(message, type = 'info') {
            const box = document.getElementById('message-box');
            const colors = {
                info: 'bg-yellow-900 border-yellow-700 text-yellow-300',
                success: 'bg-green-900 border-green-700 text-green-300',
                error: 'bg-red-900 border-red-700 text-red-300'
            };
            box.className = `fixed bottom-4 right-4 p-4 border rounded-lg text-sm transition-all duration-300 shadow-lg z-50 ${colors[type]}`;
            box.textContent = message;
            box.classList.remove('hidden');
            clearTimeout(box.timeout);
            box.timeout = setTimeout(() => box.classList.add('hidden'), 5000);
        }

        // Core Functions
        function t(key) {
            return TRANSLATIONS[CONFIG.currentLanguage][key] || key;
        }

        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            const targetPage = document.getElementById(`page-${pageName}`);
            if (targetPage) {
                targetPage.classList.add('active');
                window.location.hash = `#${pageName}`;
                if (pageName === 'showcase') {
                    renderSocialLinks();
                    renderInitialSummary();
                }
            }
        }

        function setLanguage(lang) {
            CONFIG.currentLanguage = lang;
            const langPairs = [['lang-en', 'lang-jp'], ['lang-en-contact', 'lang-jp-contact'], ['lang-en-donation', 'lang-jp-donation']];
            
            langPairs.forEach(([enId, jpId]) => {
                const enBtn = document.getElementById(enId);
                const jpBtn = document.getElementById(jpId);
                if (enBtn && jpBtn) {
                    if (lang === 'en') {
                        enBtn.classList.remove('text-gray-400');
                        enBtn.classList.add('text-primary-accent');
                        jpBtn.classList.remove('text-primary-accent');
                        jpBtn.classList.add('text-gray-400');
                    } else {
                        jpBtn.classList.remove('text-gray-400');
                        jpBtn.classList.add('text-primary-accent');
                        enBtn.classList.remove('text-primary-accent');
                        enBtn.classList.add('text-gray-400');
                    }
                }
            });

            document.getElementById('gallery-title').textContent = t('gallery-title');
            if (RELEASES_DATA.length > 0) {
                if (CONFIG.selectedReleaseIndex !== null) {
                    displayDetails(CONFIG.selectedReleaseIndex);
                } else {
                    renderInitialSummary();
                }
            }
        }

        function openModal() {
            const modal = document.getElementById('selection-modal');
            const modalContent = document.getElementById('modalContent');
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.add('opacity-100');
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
            document.body.style.overflow = 'hidden';
            renderGallery();
            document.getElementById('modal-search-input').value = '';
        }

        function closeModal() {
            const modal = document.getElementById('selection-modal');
            const modalContent = document.getElementById('modalContent');
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            modal.classList.remove('opacity-100');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        function renderSocialLinks() {
            const container = document.getElementById('social-links-bar');
            if (!container) return;
            container.innerHTML = SOCIAL_LINKS.map(link => 
                `<a href="${link.url}" target="_blank" title="Visit Ten Rise on ${link.name}" class="mx-3 transition-opacity duration-200 opacity-80 hover:opacity-100 hover:scale-105">
                    <img src="${link.iconUrl}" alt="${link.name} icon" class="w-14 h-14 object-contain rounded-lg" onerror="this.src='https://placehold.co/40x40/9ca3af/ffffff?text=?'">
                </a>`
            ).join('');
        }

        function renderGallery(releases = RELEASES_DATA) {
            const container = document.getElementById('modal-release-grid');
            if (!releases.length) {
                container.innerHTML = '<p class="text-gray-500 text-center w-full col-span-full py-12">No releases found matching your search criteria.</p>';
                return;
            }
            container.innerHTML = releases.map((release, index) => {
                const originalIndex = RELEASES_DATA.findIndex(r => r.id === release.id);
                return `<div class="flex flex-col items-center group">
                    <img src="${release.image}" alt="Cover for ${release.title}" data-index="${originalIndex}" onclick="displayDetails(${originalIndex}); closeModal();" 
                         class="album-cover w-full object-cover rounded-xl cursor-pointer shadow-lg ${originalIndex === CONFIG.selectedReleaseIndex ? 'selected' : ''}"
                         onerror="this.src='https://placehold.co/400x400/9ca3af/111827?text=${release.title.substring(0, 10)}'">
                    <p class="text-sm text-gray-400 mt-3 text-center w-full truncate group-hover:text-primary-accent transition-colors duration-200">${release.title}</p>
                </div>`;
            }).join('');
        }

        function renderInitialSummary() {
            const container = document.getElementById('current-selection-summary');
            if (!container) return;
            const covers = RELEASES_DATA.slice(0, 6).map((release, index) => 
                `<img src="${release.image}" alt="Cover for ${release.title}" data-index="${index}" onclick="displayDetails(${index})" 
                      class="w-16 h-16 object-cover rounded-md shadow-lg border-2 border-gray-700 transition-transform duration-300 hover:scale-110 cursor-pointer"
                      onerror="this.src='https://placehold.co/64x64/1f2937/ffffff?text=TR'">`
            ).join('');
            
            container.innerHTML = `<div class="flex items-center space-x-3">
                <p class="text-sm font-semibold text-gray-400 mr-2 hidden sm:block">${t('available-releases')}:</p>
                <div class="flex space-x-2">${covers}</div>
            </div>
            <div class="text-right text-xs text-gray-500 hidden sm:block">${t('click-to-view')}</div>
            <div class="text-right text-xs text-gray-500 sm:hidden"><p>${t('available-releases')}</p><p class="text-primary-accent font-semibold">View All →</p></div>`;
            
            document.getElementById('detail-content').innerHTML = `<p id="initial-prompt" class="text-gray-400 text-xl animate-pulse">${t('initial-prompt')}</p>`;
        }

        function filterReleases() {
            const query = document.getElementById('modal-search-input').value.toLowerCase().trim();
            const filtered = query ? RELEASES_DATA.filter(release => 
                release.title.toLowerCase().includes(query) || 
                release.artist.toLowerCase().includes(query) ||
                release.genres.some(genre => genre.toLowerCase().includes(query)) ||
                t(release.descriptionKey).toLowerCase().includes(query) ||
                release.releaseDate.includes(query)
            ) : RELEASES_DATA;
            renderGallery(filtered);
        }

        function displayDetails(index) {
            if (index == null) {
                CONFIG.selectedReleaseIndex = null;
                renderInitialSummary();
                return;
            }
            if (index < 0 || index >= RELEASES_DATA.length) index = 0;
            CONFIG.selectedReleaseIndex = index;
            const release = RELEASES_DATA[index];
            
            document.querySelectorAll('.album-cover').forEach(cover => {
                cover.classList.toggle('selected', parseInt(cover.getAttribute('data-index')) === index);
            });

            document.getElementById('current-selection-summary').innerHTML = 
                `<img src="${release.image}" alt="Cover for ${release.title}" class="w-16 h-16 object-cover rounded-md shadow-lg border-2 border-primary-accent" onerror="this.src='https://placehold.co/48x48/06b6d4/ffffff?text=TR'">
                 <div class="truncate flex-grow">
                    <p class="text-sm font-semibold text-gray-400">${t('current-selection')}</p>
                    <p class="text-xl font-bold text-gray-100 truncate">${release.title}</p>
                 </div>
                 <div class="hidden sm:block text-right">
                    <p class="text-xs text-gray-500">${release.artist}</p>
                    <p class="text-sm text-primary-accent">${release.duration}</p>
                 </div>`;

            document.getElementById('detail-content').innerHTML = 
                `<div class="w-full lg:w-1/3 flex flex-col items-center">
                    <img src="${release.image}" alt="Cover for ${release.title}" class="w-full max-w-xs h-auto object-cover rounded-xl shadow-xl mb-6" onerror="this.src='https://placehold.co/400x400/9ca3af/ffffff?text=${release.title.substring(0, 10)}'">
                    
                    <!-- Media Player -->
                    <div class="media-player w-full max-w-xs mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <button id="play-button" onclick="togglePlayPause()" class="play-button">
                                <svg id="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                                <svg id="pause-icon" style="display: none;" width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                                </svg>
                                <div id="loading-spinner" class="loading-spinner"></div>
                            </button>
                            <div class="flex-1 mx-4">
                                <div class="text-sm font-semibold text-gray-100 truncate">${release.title}</div>
                                <div class="text-xs text-gray-400">${release.artist}</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-2 mb-2">
                            <span id="current-time" class="time-display">0:00</span>
                            <div id="progress-bar" class="progress-bar flex-1" onclick="seekAudio(event)">
                                <div id="progress" class="progress"></div>
                            </div>
                            <span id="duration" class="time-display">${release.duration}</span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-2">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="#9ca3af">
                                    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                                </svg>
                                <input type="range" min="0" max="100" value="70" class="volume-slider" oninput="setVolume(event)">
                            </div>
                            <a href="${release.streamingLinks.find(link => link.name === 'YouTube Music').url}" target="_blank" class="text-xs text-primary-accent hover:underline">Open in YouTube Music</a>
                        </div>
                        
                        <!-- Audio Visualizer - Now fills full width -->
                        <div class="visualizer-container" id="visualizer-container">
                            <!-- Visualizer bars will be generated here -->
                        </div>
                    </div>
                    
                    <p class="text-sm font-semibold text-gray-400 mb-4 text-center">${t('listen-prompt')}</p>
                    <div id="links-container" class="w-full max-w-xs grid grid-cols-6 gap-1 mt-2 p-0">
                        ${release.streamingLinks.map(link => 
                            `<a href="${link.url}" target="_blank" title="Listen on ${link.name}" class="flex flex-col items-center justify-center transition-transform duration-150 hover:scale-110 p-1 rounded-lg focus:ring-2 focus:ring-primary-accent">
                                <img src="${link.iconUrl}" alt="${link.name} icon" class="w-8 h-8 object-contain rounded-lg shadow-md" onerror="this.src='https://placehold.co/40x40/9ca3af/ffffff?text=?'">
                             </a>`
                        ).join('')}
                    </div>
                </div>
                <div class="w-full lg:w-2/3">
                    <p class="text-xl text-primary-accent font-light uppercase tracking-wider mb-1">${t('details-heading')}</p>
                    <h2 class="text-4xl font-extrabold text-gray-100 mb-4">${release.title}</h2>
                    <div class="text-lg text-gray-300 space-y-2 mb-6 border-b border-gray-700 pb-4">
                        <p><strong class="text-gray-400">${t('artist')}:</strong> ${release.artist}</p>
                        <p><strong class="text-gray-400">${t('duration')}:</strong> ${release.duration}</p>
                        <p><strong class="text-gray-400">${t('label')}:</strong> ${release.label}</p>
                        ${release.genres ? `<p><strong class="text-gray-400">${t('style')}:</strong> ${release.genres.join(' / ')}</p>` : ''}
                        <p><strong class="text-gray-400">${t('release_date')}:</strong> ${release.releaseDate}</p>
                    </div>
                    <h3 class="text-xl font-bold text-primary-accent mb-3">${t('desc_heading')}</h3>
                    <p class="text-gray-300 text-base">${t(release.descriptionKey)}</p>
                </div>`;
            
            loadTrack(release.youtubeId);
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.replace('#', '') || 'home';
            showPage(['showcase', 'contact', 'donation'].includes(hash) ? hash : 'home');
            
            document.getElementById('contact-form').addEventListener('submit', e => {
                e.preventDefault();
                showMessage('Thank you for your message! We will get back to you soon.', 'success');
                e.target.reset();
            });

            // Close modal by clicking anywhere outside the modal box:
            // - Clicks on modalContent do NOT bubble to the overlay (stopPropagation).
            // - Clicks on the overlay backdrop will bubble to overlay and close.
            const overlay = document.getElementById('selection-modal');
            const modalContent = document.getElementById('modalContent');
            if (overlay && modalContent) {
                modalContent.addEventListener('click', (e) => e.stopPropagation());
                overlay.addEventListener('click', () => closeModal());
            }
            
            document.addEventListener('keydown', e => {
                const modal = document.getElementById('selection-modal');
                if (e.key === 'Escape' && modal && !modal.classList.contains('hidden')) {
                    closeModal();
                }
            });
            
            window.addEventListener('hashchange', () => {
                const newHash = window.location.hash.replace('#', '');
                showPage(['home', 'showcase', 'contact', 'donation'].includes(newHash) ? newHash : 'home');
            });
            
            renderSocialLinks();
            renderInitialSummary();
        });
    </script>
</body>
</html>
